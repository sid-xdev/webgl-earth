precision highp float;

uniform vec3 uLightPos;
uniform sampler2D uTexEarthSampler;
uniform sampler2D uTexNightSampler;
uniform sampler2D uTexMoonSampler;
uniform sampler2D uTexStarsSampler;
uniform int uShaderId;

varying vec3 vVertexNorm; 
varying vec4 vVertexPos;
varying vec3 vCameraPos;
varying vec2 vVertexUV;  

void main()
{
	vec3 lightPos = uLightPos + vCameraPos;
	vec3 lightDirection = normalize( lightPos - vec3( vVertexPos )); 
	if( uShaderId == 0 )
	{
		gl_FragColor = vec4( 5.0, 5.0, 5.0, 1.0 );
	}
	
	if( uShaderId == 1 )
	{
		vec4 earth = vec4( ( 0.05 + max( dot( vVertexNorm, lightDirection ), 0.0 ) ) * vec3( texture2D( uTexEarthSampler, vVertexUV ) ), 1.0 );
		vec3 night = 10.0 * ( 0.15 - max( dot( vVertexNorm, lightDirection ), 0.0 ) ) * vec3( texture2D( uTexNightSampler, vVertexUV ) );
		night = vec3( max( night[0], 0.0 ), max( night[1], 0.0 ), max( night[2], 0.0 ) );
		gl_FragColor = earth + vec4( night, 1.0 );
	}
	
	if( uShaderId == 2 )
	{
		vec4 moon = vec4( ( 0.05 + max( dot( vVertexNorm, lightDirection ), 0.0 ) ) * vec3( texture2D( uTexMoonSampler, vVertexUV ) ), 1.0 );
		gl_FragColor = moon;
	}
	
	if( uShaderId == 3 )
	{
		gl_FragColor = 3.0 * texture2D( uTexStarsSampler, vVertexUV );
	}
}